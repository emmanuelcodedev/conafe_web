{% extends "base.html" %}

{% block title %}Modificar Información del Empleado{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="d-flex justify-content-start mb-3">
        <a href="{% url 'dot_home:home_dot' %}" class="btn btn-warning" style="background-color: #620b0b; color:white">Menú</a>
    </div>

    <h2>Modificar Información del Empleado</h2>

    <!-- Mostrar Mensajes de Confirmación -->
    {% if messages %}
        <div class="alert alert-success" role="alert">
            {% for message in messages %}
                {{ message }}
            {% endfor %}
        </div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        
        <!-- Formulario de Datos Personales -->
        <div class="form-group hidden">
            <label for="nombre">Nombre</label>
            {{ datos_personales_form.nombre }}
        </div>

        <div class="form-group hidden">
            <label for="apellidopa">Apellido Paterno</label>
            {{ datos_personales_form.apellidopa }}
        </div>

        <div class="form-group hidden">
            <label for="apellidoma">Apellido Materno</label>
            {{ datos_personales_form.apellidoma }}
        </div>

        <div class="form-group hidden">
            <label for="edad">Edad</label>
            {{ datos_personales_form.edad }}
        </div>

        <div class="form-group hidden">
            <label for="sexo">Sexo</label>
            {{ datos_personales_form.sexo }}
        </div>

        <style>
            .hidden {
                display: none;
            }
        </style>

        <div class="form-group">
            <label for="correo">Correo Electrónico</label>
            {{ datos_personales_form.correo }}
        </div>

        <div class="form-group">
            <label for="telefono">Teléfono</label>
            {{ datos_personales_form.telefono }}
        </div>

        <div class="form-group">
            <label for="formacion_academica">Formación Académica</label>
            {{ datos_personales_form.formacion_academica }}
        </div>

        <div class="form-group hidden">
            <label for="curp">CURP</label>
            {{ datos_personales_form.curp }}
        </div>

        <div class="form-group">
            <label for="fotografia">Fotografía</label>
            {{ datos_personales_form.fotografia }}
        </div>

        <!-- Formulario de Documentos Personales -->
        <h3>Documentos Personales</h3>

        <div class="form-group">
            <label for="identificacion_oficial">Identificación Oficial</label>
            {{ documentos_form.identificacion_oficial }}
        </div>

        <div class="form-group">
            <label for="comprobante_domicilio">Comprobante de Domicilio</label>
            {{ documentos_form.comprobante_domicilio }}
        </div>

        <div class="form-group">
            <label for="certificado_estudio">Certificado de Estudio</label>
            {{ documentos_form.certificado_estudio }}
        </div>

        <!-- Formulario de Datos de Usuario -->
        <h3>Datos de Usuario</h3>

        <div class="form-group">
            <label for="usuario">Nombre de Usuario</label>
            {{ usuario_form.usuario }}
        </div>

        <div class="form-group">
            <label for="rol">Rol</label>
            {{ usuario_form.rol }}
        </div>

        <div class="form-group">
            <label for="contrasenia">Contraseña</label>
            <div class="input-group">
                <input 
                    type="password" 
                    id="contrasenia" 
                    name="contrasenia" 
                    class="form-control" 
                    value="{{ usuario_form.instance.contrasenia }}" 
                    placeholder="Contraseña (solo si deseas cambiarla)">
                <div class="input-group-append">
                    <button 
                        class="btn btn-outline-secondary" 
                        type="button" 
                        id="togglePassword">
                        Mostrar
                    </button>
                </div>
            </div>
        </div>
        
        

        <button type="submit" class="btn btn-primary">Guardar cambios</button>
    </form>
</div>

<script>
    document.getElementById("togglePassword").addEventListener("click", function () {
        const passwordInput = document.getElementById("contrasenia");
        const passwordType = passwordInput.getAttribute("type");
        
        if (passwordType === "password") {
            passwordInput.setAttribute("type", "text");
            this.textContent = "Ocultar";
        } else {
            passwordInput.setAttribute("type", "password");
            this.textContent = "Mostrar";
        }
    });
</script>
{% endblock %}
